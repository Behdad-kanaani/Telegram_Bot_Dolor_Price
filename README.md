# ๐ ุณุณุชู ูพุงุด ู ุงุนูุงู ููุชโูุง ูุญุธูโุง ุจุงุฒุงุฑ

ุงู ูพุฑูฺู ฺฉ ูุนูุงุฑ ฺฉุงูู ู ูพุงุฏุงุฑ ุจุฑุง ูพุงุด ุฎูุฏฺฉุงุฑ ููุชโูุง ูุญุธูโุง ุฏุงุฑุงโูุง ูุงู (ุทูุงุ ุฏูุงุฑุ ุชุชุฑ) ุงุฒ ูุจโุณุงุชโูุง ูุฎุชูู ู ุงุฑุณุงู ููุดููุฏุงูู ุชุบุฑุงุช ุขูโูุง ุจู ฺฉ ฺฉุงูุงู ุง ฺฏุฑูู ุชูฺฏุฑุงู ุงุณุช.  
ุจุฑุง ุชุถูู ูพุงุฏุงุฑ ู ุฏูุฑ ุฒุฏู ูุญุฏูุฏุชโูุง ุงุญุชูุงูุ ุงุฒ ฺฉ **Cloudflare Worker** ุจูโุนููุงู ูพุฑูฺฉุณ ุงูู ู ฺฉุงุฑุขูุฏ ุงุณุชูุงุฏู ูโุดูุฏ.

> โ๏ธ **ุชูุฌู**: ุงู ูพุฑูฺู ุตุฑูุงู ุฌูุช ููุงุด ูุนูุงุฑ ู ุฑูุด ฺฉุงุฑ ุทุฑุงุญ ุดุฏู ุงุณุช.  
> ููฺฉโูุง ูุจโุณุงุชโูุง ุฏุฑ ฺฉุฏ ูพุงุชูู ุจูโุตูุฑุช ุชุณุช ู ุจุง ุงุณุชูุงุฏู ุงุฒ ูฺฉุงูโูุง ูฺฏูุฏุงุฑูุฏู (Placeholder) ููุงุด ุฏุงุฏู ุดุฏูโุงูุฏ.  
> ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ูุญุท ูุงูุนุ ุจุงุฏ ููฺฉโูุง ูุนุชุจุฑ ู ููุฑุฏ ุชุฃุฏ ุฎูุฏ ุฑุง ุฌุงฺฏุฒู ฺฉูุฏ.

---

## โจ ูฺฺฏโูุง ุจุฑุฌุณุชู ูพุฑูฺู

- ๐ **ูพุงุด ุฏุฑ ุฒูุงู ูุงูุน**  
  ุงุณฺฉุฑูพุช ูพุงุชูู ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ู ููุธูุ ุฏุฑ ุจุงุฒูโูุง ุฒูุงู ูุงุจู ุชูุธูุ ูุจโุณุงุชโูุง ูุฏู ุฑุง ุงุณฺฉุฑูพ ฺฉุฑุฏู ู ุฏุงุฏูโูุง ูุญุธูโุง ุฑุง ุงุณุชุฎุฑุงุฌ ูโฺฉูุฏ.

- ๐ **ุงุนูุงู ููุดููุฏ**  
  ุจุง ููุงุณู ููุชโูุง ุฌุฏุฏ ุจุง ููุงุฏุฑ ูุจูุ ุชุบุฑุงุช ููุช ุชุดุฎุต ุฏุงุฏู ุดุฏู ู ุจุง ุงููุฌโูุง ุฑูฺฏ:  
  ๐ข ุงูุฒุงุด | ๐ด ฺฉุงูุด | โช ุซุจุงุช  
  ุจู ุชูฺฏุฑุงู ุงุฑุณุงู ูโุดููุฏ.

- ๐ **ูพุฑูฺฉุณ ุงูู Cloudflare Worker**  
  ุจูโุนููุงู ฺฉ ูุงู ูุงูุ ุฏุฑุฎูุงุณุชโูุง HTTP ุฑุง ุงูู ู ูพุงุฏุงุฑ ุงุฑุณุงู ฺฉุฑุฏู ู ูุญุฏูุฏุชโูุง ุฌุบุฑุงูุง ุฑุง ุฏูุฑ ูโุฒูุฏ.

- ๐ก๏ธ **ูุงูโูุง ุงููุช ฺูุฏฺฏุงูู**
  - **ุงุญุฑุงุฒ ููุช ุจุง ุชูฺฉู**: ููุท ุฏุฑุฎูุงุณุชโูุง ูุนุชุจุฑ ูพุฐุฑูุชู ูโุดููุฏ.
  - **ูุณุช ุณูุฏ ุฏุงูููโูุง (Whitelist)**: Worker ุชููุง ุจู ุฏุงูููโูุง ูุฌุงุฒ ูุชุตู ูโุดูุฏ.

- โ๏ธ **ุทุฑุงุญ ูุงฺููุงุฑ**  
  ูพุฑูฺู ุจู ุฏู ุจุฎุด ูุฌุฒุง (Worker ู ุงุณฺฉุฑูพุช ูพุงุชูู) ุชูุณู ุดุฏู ฺฉู ูฺฏูุฏุงุฑ ู ุชูุณุนู ุฑุง ุณุงุฏูโุชุฑ ูโฺฉูุฏ.

---

## ๐บ๏ธ ูุนูุงุฑ ุณุณุชู

ุณุณุชู ุจุฑ ุงุณุงุณ ุฏู ุฌุฒุก ุงุตู ุณุงุฎุชู ุดุฏู ุงุณุช:

1. **Cloudflare Worker (ุฏุฑูุงุฒู ุงูู ูพุฑูฺฉุณ)**  
   ุฏุฑุฎูุงุณุชโูุง ุฑุง ุงุนุชุจุงุฑุณูุฌ ฺฉุฑุฏู ู ุจู ููุตุฏ ูุฏุงุช ูโฺฉูุฏ.

2. **ุงุณฺฉุฑูพุช ูพุงุชูู (ููุชูุฑ ุงุตู)**  
   ูุณุฆูู ุงุณฺฉุฑูพูฺฏุ ุชุญูู ุฏุงุฏูโูุง ู ุงุฑุณุงู ุงุนูุงูโูุง ุจู ุชูฺฏุฑุงู ุงุณุช.

### ูุญูู ฺฉุงุฑฺฉุฑุฏ

- ุงุณฺฉุฑูพุช ูพุงุชูู ุฏุฑุฎูุงุณุชโูุง ุฎูุฏ ุฑุง ุจู Worker ุงุฑุณุงู ูโฺฉูุฏ.  
- Worker ูพุณ ุงุฒ ุชุฃุฏ ููุชุ ุขูโูุง ุฑุง ุจู ูุจโุณุงุชโูุง ูุฏู ุง API ุชูฺฏุฑุงู ูุฏุงุช ูโฺฉูุฏ.  
- ูพุงุณุฎ ุฏุฑุงูุช ุฏูุจุงุฑู ุจู ูพุงุชูู ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ.

![ูุนูุงุฑ ูพุฑูฺู](https://i.ibb.co/v4b24gG/architecture.png)

---

## ๐ป ุชุญูู ูู ู ุชูุถุญุงุช ฺฉุฏูุง

### 1. Cloudflare Worker (`cloudflare.js`) โ๏ธ

- ููุทู ูุฑูุฏ ุงุตู:

  ```js
  export default {
    async fetch(request) {
      // ...
    }
  }

* **ุงุญุฑุงุฒ ููุช ุจุง SECRET\_TOKEN**

  ```js
  const SECRET_TOKEN = "myStrongSecret123";
  const token = request.headers.get("x-access-token");
  if (token !== SECRET_TOKEN) {
      return new Response("Unauthorized: Invalid or missing token", { status: 401 });
  }
  ```

* **ูุณุช ุณูุฏ ุฏุงูููโูุง**
  ุงุฌุงุฒู ุฏุณุชุฑุณ ููุท ุจู ุฏุงูููโูุง ูุฌุงุฒ.

* **ูุฏุฑุช ุฒูุงู ู ููุงุจุน**
  ุงุณุชูุงุฏู ุงุฒ `AbortController` ุจุฑุง timeout ฑต ุซุงููโุง.

---

### 2. ุงุณฺฉุฑูพุช ูพุงุชูู (`main.py`) ๐

* **ุชูุธูุงุช ุงููู**
  ุดุงูู `WORKER_URL`, `WORKER_TOKEN`, `TELEGRAM_BOT_TOKEN`, `TELEGRAM_CHAT_ID`.

* **ุฏฺฉุดูุฑ `SCRAPE_TARGETS`**
  ููุดู ูุจโุณุงุชโูุง ู ุฏุงุฑุงโูุง.

* **ุชูุงุจุน ฺฉูุฏ**

  * `send_telegram_message_via_worker`: ุงุฑุณุงู ูพุงู ุจู ุชูฺฏุฑุงู ุงุฒ ุทุฑู Worker.
  * `scrape_price`: ุงุณุชุฎุฑุงุฌ ููุชโูุง ุจุง BeautifulSoup.

* **ุญููู ุงุตู (`while True`)**
  ุงุฌุฑุง ููุธู ูพุงุด ู ุงุนูุงู ุจุฑ ุงุณุงุณ ุจุงุฒู ุชูุธูโุดุฏู.

---

## ๐ ุฑุงูููุง ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### 1. ุฑุงูโุงูุฏุงุฒ Cloudflare Worker โ๏ธ

* ูุฑูุฏ ุจู ูพูู Cloudflare > ุจุฎุด **Workers & Pages**
* ุงุฌุงุฏ Worker ุฌุฏุฏ ู ุฌุงโฺฏุฐุงุฑ ฺฉุฏ `cloudflare.js`
* ุชูุธู ููุฏุงุฑ ุงูู ุจุฑุง `SECRET_TOKEN`
* Deploy ู ฺฉูพ ฺฉุฑุฏู URL Worker

---

### 2. ุชูุธู ุงุณฺฉุฑูพุช ูพุงุชูู ๐

* ูุตุจ ูพุดโูุงุฒูุง:

  ```bash
  pip install requests beautifulsoup4
  ```

* ูุฑุงุด ูุงู `main.py` ู ุชูุธู ููุงุฏุฑ:

  * `WORKER_URL`
  * `WORKER_TOKEN`
  * `TELEGRAM_BOT_TOKEN`
  * `TELEGRAM_CHAT_ID`

* ุฌุงฺฏุฒู ููฺฉโูุง ูุงูุน ุฏุฑ `SCRAPE_TARGETS`

---

### 3. ุงุฌุฑุง ูพุฑูฺู โถ๏ธ

```bash
python main.py
```

### ุงุฌุฑุง ุฏุงุฆู ุฑู ุณุฑูุฑ โพ๏ธ

```bash
nohup python main.py &
```

---

## ๐ก๏ธ ููุงุญุธุงุช ุงููุช

* ุชูฺฉูโูุง ุฑุง ูุฑฺฏุฒ ุฏุฑ ูุฎุฒู ุนููู ููุชุดุฑ ูฺฉูุฏ.
  ุงุฒ **ูุชุบุฑูุง ูุญุท** ุงุณุชูุงุฏู ฺฉูุฏ.

* ุฏุงูููโูุง ูุฌุงุฒ ุฑุง ุฏุฑ `allowedHosts` ูุญุฏูุฏ ฺฉูุฏ.

---

## ๐ค ูุดุงุฑฺฉุช ู ูพุดุชุจุงู

ุงฺฏุฑ ุณูุงู ุง ูพุดููุงุฏ ุฏุงุฑุฏุ ูุทูุงู ฺฉ **Issue** ุฌุฏุฏ ุฏุฑ ููู ูุฎุฒู ุจุงุฒ ฺฉูุฏ.
ูุดุงุฑฺฉุช ุดูุง ุจุงุนุซ ุจูุจูุฏ ูพุฑูฺู ุฎูุงูุฏ ุดุฏ.

---

ุงฺฏุฑ ุจุฎูุงูุ ููููู ูุงูโูุง ฺฉุฏ ฺฉุงูู `cloudflare.js` ู `main.py` ุฑุง ูู ุงุถุงูู ฺฉูู ุฏุงุฎู README ุชุง ุฏุณุชุฑุณ ูุณุชูู ุจู ฺฉุฏ ูู ุฏุงุดุชู ุจุงุดูุฏุ  
ุง ููุท ููู ุชูุถุญุงุช ู ุฑุงูููุง ฺฉูุงุช ูโฺฉูุฏุ
